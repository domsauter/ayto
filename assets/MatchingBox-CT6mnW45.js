import{u as C,r as l,j as e}from"./auth-CiqFla1T.js";import{u as I}from"./season-B2oCyVg0.js";function _(){const{currentSeason:t,addTruthBooth:g,deleteTruthBooth:N,updateTruthBooth:v,loadingCurrentSeason:B,error:j}=I(),{profile:M}=C(),i=M?.role==="admin",[o,r]=l.useState(""),[h,c]=l.useState(""),[m,s]=l.useState(!0),[a,u]=l.useState(null);if(l.useEffect(()=>{u(null),r(""),c(""),s(!0)},[t]),!t)return e.jsxs("div",{className:"p-8",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Match Box"}),e.jsx("p",{children:"Bitte wähle zuerst eine Staffel aus."})]});if(B)return e.jsx("div",{className:"p-8",children:"Loading matching box data..."});if(j)return e.jsxs("div",{className:"p-8 text-red-500",children:["Error: ",j]});const x=t.candidates.filter(n=>n.gender==="Mann"),p=t.candidates.filter(n=>n.gender==="Frau");if(x.length===0||p.length===0)return e.jsxs("div",{className:"p-8",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Match Box"}),e.jsx("p",{children:"Bitte füge zuerst Kandidaten hinzu (Männer und Frauen)."})]});const w=n=>{u(n.id),r(n.couple.man),c(n.couple.woman),s(n.is_perfect_match)},b=()=>{u(null),r(""),c(""),s(!0)},y=n=>{if(n.preventDefault(),!i)return;if(!o||!h){alert("Please select a couple.");return}const d={couple:{man:o,woman:h},is_perfect_match:m};a?v(t.id,a,d):g(t.id,d),b()};return e.jsxs("div",{className:"p-8",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-4",children:["Match Box für ",t.name]}),i&&e.jsxs("form",{onSubmit:y,className:"mb-8 p-4 border rounded-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:a?"Match Box bearbeiten":"Paar in die Match Box schicken"}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("select",{value:o,onChange:n=>r(n.target.value),className:"border p-2 rounded-md w-full",children:[e.jsx("option",{value:"",children:"Mann wählen"}),x.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]}),e.jsx("span",{children:"&"}),e.jsxs("select",{value:h,onChange:n=>c(n.target.value),className:"border p-2 rounded-md w-full",children:[e.jsx("option",{value:"",children:"Frau wählen"}),p.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("label",{className:"font-bold",children:"Ergebnis:"}),e.jsxs("label",{className:"mr-4",children:[e.jsx("input",{type:"radio",name:"match",checked:m,onChange:()=>s(!0)}),"Perfect Match"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"match",checked:!m,onChange:()=>s(!1)}),"No Match"]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"submit",className:"bg-pink-600 text-white px-4 py-2 rounded-md",children:a?"Änderungen speichern":"Speichern"}),a&&e.jsx("button",{type:"button",onClick:b,className:"bg-gray-500 text-white px-4 py-2 rounded-md",children:"Abbrechen"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Bisherige Match Boxen"}),e.jsx("ul",{className:"space-y-2",children:t.truthBooths.map(n=>{const d=x.find(f=>f.id===parseInt(n.couple.man)),S=p.find(f=>f.id===parseInt(n.couple.woman));return e.jsxs("li",{className:`p-2 rounded-md flex justify-between items-center ${n.is_perfect_match?"bg-green-100":"bg-red-100"}`,children:[e.jsxs("span",{children:[d?.name," & ",S?.name," - ",n.is_perfect_match?"Perfect Match":"No Match"]}),i&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>w(n),className:"bg-yellow-500 text-white px-3 py-1 rounded-md",children:"Bearbeiten"}),e.jsx("button",{onClick:()=>N(t.id,n.id),className:"bg-red-500 text-white px-3 py-1 rounded-md",children:"Löschen"})]})]},n.id)})})]})]})}export{_ as default};
